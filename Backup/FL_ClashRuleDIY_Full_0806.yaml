# FL_ClashRuleDIY_Full_0806.yaml
# FL_Clash_Rule_DIY.js - ç­–ç•¥ç»„ä¼˜åŒ–ç‰ˆ
# ä¼˜åŒ–ï¼šç›´æ¥ä½¿ç”¨å®Œæ•´è§„åˆ™URLï¼Œä¾¿äºç»´æŠ¤
# ç‰¹ç‚¹ï¼šæ‰€æœ‰è§„åˆ™é›†ä½¿ç”¨å®Œæ•´URLï¼Œå›¾æ ‡ä½¿ç”¨å®Œæ•´URL
# ç‰ˆæœ¬ï¼šv8.0.0
# æœ€åæ›´æ–°ï¼š2024-08-06

port: 7890
socks-port: 7891
allow-lan: true
bind-address: '*'
mode: rule
log-level: info
external-controller: 127.0.0.1:9090

# ===================== è„šæœ¬è½¬æ¢è¯´æ˜ =====================
# åŸå§‹è„šæœ¬ï¼šFL_ClashRuleDIY_Full_0806.js (JavaScriptæ ¼å¼)
# è½¬æ¢ç›®æ ‡ï¼šFL_ClashRuleDIY_Full_0806.yaml (YAMLæ ¼å¼ï¼Œå¯ç›´æ¥ç”¨äºClash)
# è½¬æ¢åŸåˆ™ï¼š
# 1. ä¿æŒåŸæœ‰åˆ†æµç­–ç•¥å’ŒåŠŸèƒ½è®¾ç½®ä¸å˜
# 2. å‚è€ƒFL_RuleSet_Full.yamlçš„ç»“æ„é£æ ¼
# 3. æ”¯æŒfilterç‰¹æ€§å®ç°åŠ¨æ€èŠ‚ç‚¹åˆ†ç»„
# 4. ä¿ç•™åŸæœ‰æ³¨é‡Šå’Œè¯´æ˜ä¿¡æ¯

# ===================== è½¬æ¢çŠ¶æ€è¯´æ˜ =====================
# âœ… å·²æˆåŠŸè½¬æ¢çš„æ¨¡å—ï¼š
# - åŸºç¡€é…ç½®å‚æ•° (mixed-port, allow-lanç­‰)
# - æµé‡å—…æ¢é…ç½® (sniffer)
# - DNSé…ç½® (dns) - å‚è€ƒFL_RuleSet_Full.yamlä¼˜åŒ–
# - TUNé…ç½® (tun) - å‚è€ƒFL_RuleSet_Full.yamlä¼˜åŒ–
# - ä»£ç†ç»„é…ç½® (proxy-groups) - æ”¯æŒfilteråŠ¨æ€åˆ†ç»„
# - è§„åˆ™é…ç½® (rules)
# - è§„åˆ™æä¾›å™¨é…ç½® (rule-providers)
# - åœ°ç†æ•°æ®é…ç½® (geox-url) - å¢åŠ MMDBå’ŒASNæ”¯æŒ

# ===================== å¾…       åŠ =====================
# 1.å®Œå–„è§„åˆ™é›†ï¼Œå°½é‡ç»Ÿä¸€è§„åˆ™é›†ä»“åº“
# ===================== é…ç½®ç®¡ç†ä¸­å¿ƒ =====================

# ================= DNS é…ç½® =================
dns:
  enable: true
  listen: :1053
  ipv6: true
  prefer-h3: true
  use-hosts: true
  use-system-hosts: true
  respect-rules: true
  enhanced-mode: fake-ip
  fake-ip-range: 198.18.0.1/16
  fake-ip-filter:
    - '*'
    - '+.lan'
    - '+.local'
    - '+.market.xiaomi.com'
    - "localhost.ptlogin2.qq.com"
    - "localhost.sec.qq.com"
    - "*.qq.com"
    - "*.tencent.com"
    - "*.msftconnecttest.com"
    - "*.msftncsi.com"
  nameserver:
    - 'https://120.53.53.53/dns-query'
    - 'https://223.5.5.5/dns-query'
  proxy-server-nameserver:
    - 'https://1.1.1.1/dns-query'
    - 'https://223.5.5.5/dns-query'
  ssl-verification: true
  cache: true
  cache-size: 4096
  cache-ttl-min: 600
  cache-ttl-max: 3600
  nameserver-policy:
    'geosite:private': 'system'
    'geosite:cn,steam@cn,category-games@cn,microsoft@cn,apple@cn': 
      - '119.29.29.29'
      - '223.5.5.5'

# ================= ç­–ç•¥ç»„é…ç½® =================
proxy-groups:
  # ==== æ ¸å¿ƒè·¯ç”±ç­–ç•¥ç»„ ====
  - name: "ä»£ç†æ¨¡å¼"
    type: select
    proxies:
      - "å»¶è¿Ÿä¼˜é€‰"
      - "æ•…éšœè½¬ç§»"
      - "è´Ÿè½½å‡è¡¡ Â· æ•£åˆ—"
      - "è´Ÿè½½å‡è¡¡ Â· è½®è¯¢"
      - "å®¶å®½/åŸç”Ÿçº¿è·¯"
      - "ä½å€ç‡èŠ‚ç‚¹"
      - "æ‰‹åŠ¨é€‰æ‹© (åœ°åŒº)"
      - "DIRECT"
      - "REJECT"

  - name: "å»¶è¿Ÿä¼˜é€‰"
    type: url-test
    tolerance: 50
    interval: 600
    url: "http://www.gstatic.com/generate_204"
    exclude-filter: "è‡ªåŠ¨é€‰æ‹©|æ‰‹åŠ¨é€‰æ‹©"
    proxies: ["DIRECT"]

  - name: "æ•…éšœè½¬ç§»"
    type: fallback
    interval: 600
    url: "http://www.gstatic.com/generate_204"
    exclude-filter: "è‡ªåŠ¨é€‰æ‹©|æ‰‹åŠ¨é€‰æ‹©"
    proxies: ["DIRECT"]

  - name: "è´Ÿè½½å‡è¡¡ Â· æ•£åˆ—"
    type: load-balance
    strategy: "consistent-hashing"
    interval: 600
    url: "http://www.gstatic.com/generate_204"
    exclude-filter: "è‡ªåŠ¨é€‰æ‹©|æ‰‹åŠ¨é€‰æ‹©"
    proxies: ["DIRECT"]

  - name: "è´Ÿè½½å‡è¡¡ Â· è½®è¯¢"
    type: load-balance
    strategy: "round-robin"
    interval: 600
    url: "http://www.gstatic.com/generate_204"
    exclude-filter: "è‡ªåŠ¨é€‰æ‹©|æ‰‹åŠ¨é€‰æ‹©"
    proxies: ["DIRECT"]

  # ==== ç‰¹æ®Šçº¿è·¯ç­–ç•¥ç»„ ====
  - name: "å®¶å®½/åŸç”Ÿçº¿è·¯"
    type: url-test
    filter: "(å®¶å®½|åŸç”Ÿ|residential|home)"
    tolerance: 50
    interval: 600
    url: "http://www.gstatic.com/generate_204"

  - name: "ä½å€ç‡èŠ‚ç‚¹"
    type: url-test
    filter: "(ä½å€ç‡|lowrate|ä½-rate|å€ç‡)"
    tolerance: 50
    interval: 600
    url: "http://www.gstatic.com/generate_204"

  # ==== åœ°åŒºç­–ç•¥ç»„ ====
  - name: "é¦™æ¸¯ Â· è‡ªåŠ¨é€‰æ‹©"
    type: url-test
    filter: "(é¦™æ¸¯|HK|Hong Kong|ğŸ‡­ğŸ‡°)"
    tolerance: 50
    interval: 600
    url: "http://www.gstatic.com/generate_204"

  - name: "æ–°åŠ å¡ Â· è‡ªåŠ¨é€‰æ‹©"
    type: url-test
    filter: "(æ–°åŠ å¡|ç‹®åŸ|SG|Singapore|ğŸ‡¸ğŸ‡¬)"
    tolerance: 50
    interval: 600
    url: "http://www.gstatic.com/generate_204"

  - name: "æ—¥æœ¬ Â· è‡ªåŠ¨é€‰æ‹©"
    type: url-test
    filter: "(æ—¥æœ¬|JP|Japan|ğŸ‡¯ğŸ‡µ)"
    tolerance: 50
    interval: 600
    url: "http://www.gstatic.com/generate_204"

  - name: "ç¾å›½ Â· è‡ªåŠ¨é€‰æ‹©"
    type: url-test
    filter: "(ç¾å›½|US|USA|United States|America|ğŸ‡ºğŸ‡¸)"
    tolerance: 50
    interval: 600
    url: "http://www.gstatic.com/generate_204"

  - name: "å…¶ä»–åœ°åŒº Â· è‡ªåŠ¨é€‰æ‹©"
    type: url-test
    filter: "^(?!.*(?:é¦™æ¸¯|HK|Hong Kong|ğŸ‡­ğŸ‡°|æ–°åŠ å¡|ç‹®åŸ|SG|Singapore|ğŸ‡¸ğŸ‡¬|æ—¥æœ¬|JP|Japan|ğŸ‡¯ğŸ‡µ|ç¾å›½|US|USA|United States|America|ğŸ‡ºğŸ‡¸|å®¶å®½|åŸç”Ÿ|residential|home|ä½å€ç‡|lowrate|ä½-rate|å€ç‡)).*$"
    tolerance: 50
    interval: 600
    url: "http://www.gstatic.com/generate_204"

  # ==== åœ°åŒºæ‰‹åŠ¨é€‰æ‹©å…¥å£ ====
  - name: "æ‰‹åŠ¨é€‰æ‹© (åœ°åŒº)"
    type: select
    proxies:
      - "é¦™æ¸¯ Â· æ‰‹åŠ¨é€‰æ‹©"
      - "æ–°åŠ å¡ Â· æ‰‹åŠ¨é€‰æ‹©"
      - "æ—¥æœ¬ Â· æ‰‹åŠ¨é€‰æ‹©"
      - "ç¾å›½ Â· æ‰‹åŠ¨é€‰æ‹©"
      - "å…¶ä»–åœ°åŒº Â· æ‰‹åŠ¨é€‰æ‹©"
      - "å®¶å®½/åŸç”Ÿçº¿è·¯"
      - "ä½å€ç‡èŠ‚ç‚¹"
      - "DIRECT"
      - "REJECT"

  - name: "é¦™æ¸¯ Â· æ‰‹åŠ¨é€‰æ‹©"
    type: select
    filter: "(é¦™æ¸¯|HK|Hong Kong|ğŸ‡­ğŸ‡°)"

  - name: "æ–°åŠ å¡ Â· æ‰‹åŠ¨é€‰æ‹©"
    type: select
    filter: "(æ–°åŠ å¡|ç‹®åŸ|SG|Singapore|ğŸ‡¸ğŸ‡¬)"

  - name: "æ—¥æœ¬ Â· æ‰‹åŠ¨é€‰æ‹©"
    type: select
    filter: "(æ—¥æœ¬|JP|Japan|ğŸ‡¯ğŸ‡µ)"

  - name: "ç¾å›½ Â· æ‰‹åŠ¨é€‰æ‹©"
    type: select
    filter: "(ç¾å›½|US|USA|United States|America|ğŸ‡ºğŸ‡¸)"

  - name: "å…¶ä»–åœ°åŒº Â· æ‰‹åŠ¨é€‰æ‹©"
    type: select
    filter: "^(?!.*(?:é¦™æ¸¯|HK|Hong Kong|ğŸ‡­ğŸ‡°|æ–°åŠ å¡|ç‹®åŸ|SG|Singapore|ğŸ‡¸ğŸ‡¬|æ—¥æœ¬|JP|Japan|ğŸ‡¯ğŸ‡µ|ç¾å›½|US|USA|United States|America|ğŸ‡ºğŸ‡¸|å®¶å®½|åŸç”Ÿ|residential|home|ä½å€ç‡|lowrate|ä½-rate|å€ç‡)).*$"

  # ==== æœåŠ¡ä¸“ç”¨ç­–ç•¥ç»„ ====
  - name: "ç½‘ç»œåŠå…¬"
    type: select
    proxies:
      - "ä»£ç†æ¨¡å¼"
      - "å»¶è¿Ÿä¼˜é€‰"
      - "æ•…éšœè½¬ç§»"
      - "DIRECT"
      - "REJECT"

  - name: "å³æ—¶é€šè®¯"
    type: select
    proxies:
      - "ä»£ç†æ¨¡å¼"
      - "å»¶è¿Ÿä¼˜é€‰"
      - "æ•…éšœè½¬ç§»"
      - "DIRECT"
      - "REJECT"

  - name: "AIæœåŠ¡"
    type: select
    proxies:
      - "ä»£ç†æ¨¡å¼"
      - "å»¶è¿Ÿä¼˜é€‰"
      - "æ•…éšœè½¬ç§»"
      - "DIRECT"
      - "REJECT"

  - name: "å¹³å°æœåŠ¡"
    type: select
    proxies:
      - "ä»£ç†æ¨¡å¼"
      - "å»¶è¿Ÿä¼˜é€‰"
      - "æ•…éšœè½¬ç§»"
      - "DIRECT"
      - "REJECT"

  - name: "è§†é¢‘æœåŠ¡"
    type: select
    proxies:
      - "ä»£ç†æ¨¡å¼"
      - "å»¶è¿Ÿä¼˜é€‰"
      - "æ•…éšœè½¬ç§»"
      - "DIRECT"
      - "REJECT"

  - name: "è°·æ­ŒæœåŠ¡"
    type: select
    proxies:
      - "ä»£ç†æ¨¡å¼"
      - "å»¶è¿Ÿä¼˜é€‰"
      - "æ•…éšœè½¬ç§»"
      - "DIRECT"
      - "REJECT"

  - name: "å¾®è½¯æœåŠ¡"
    type: select
    proxies:
      - "ä»£ç†æ¨¡å¼"
      - "å»¶è¿Ÿä¼˜é€‰"
      - "æ•…éšœè½¬ç§»"
      - "DIRECT"
      - "REJECT"

  - name: "è™šå¹»å¼•æ“"
    type: select
    proxies:
      - "ä»£ç†æ¨¡å¼"
      - "å»¶è¿Ÿä¼˜é€‰"
      - "æ•…éšœè½¬ç§»"
      - "DIRECT"
      - "REJECT"

  - name: "å¹¿å‘Šæ‹¦æˆª"
    type: select
    proxies:
      - "REJECT"
      - "DIRECT"

  - name: "æ‹¦æˆªè·Ÿè¸ª"
    type: select
    proxies:
      - "REJECT"
      - "DIRECT"

  # ==== æµé‡ç®¡ç†ç­–ç•¥ç»„ ====
  - name: "å¤§æµé‡é€šé“"
    type: select
    proxies:
      - "DIRECT"
      - "ä»£ç†æ¨¡å¼"
      - "å»¶è¿Ÿä¼˜é€‰"
      - "æ•…éšœè½¬ç§»"
      - "REJECT"

  # ==== è‡ªå®šä¹‰è§„åˆ™ç­–ç•¥ç»„ ====
  - name: "è‡ªå®šä¹‰ä»£ç†è§„åˆ™"
    type: select
    proxies:
      - "ä»£ç†æ¨¡å¼"
      - "å»¶è¿Ÿä¼˜é€‰"
      - "æ•…éšœè½¬ç§»"
      - "DIRECT"
      - "REJECT"

  - name: "è‡ªå®šä¹‰ç›´è¿è§„åˆ™"
    type: select
    proxies:
      - "DIRECT"
      - "ä»£ç†æ¨¡å¼"
      - "å»¶è¿Ÿä¼˜é€‰"
      - "æ•…éšœè½¬ç§»"
      - "REJECT"

  # ==== é»˜è®¤è·¯ç”±ç­–ç•¥ç»„ ====
  - name: "å›½å†…æµé‡"
    type: select
    proxies:
      - "DIRECT"
      - "REJECT"
      - "ä»£ç†æ¨¡å¼"
      - "å»¶è¿Ÿä¼˜é€‰"
      - "æ•…éšœè½¬ç§»"

  - name: "å›½é™…æµé‡"
    type: select
    proxies:
      - "DIRECT"
      - "REJECT"
      - "ä»£ç†æ¨¡å¼"
      - "å»¶è¿Ÿä¼˜é€‰"
      - "æ•…éšœè½¬ç§»"

# ================= è§„åˆ™æä¾›è€… =================
rule-providers:
  # å¹¿å‘Šæ‹¦æˆªè§„åˆ™é›†
  Reject_ip:
    type: "http"
    behavior: "classical"
    format: "yaml"
    interval: 86400
    url: "https://raw.githubusercontent.com/RealSeek/Clash_Rule_DIY/refs/heads/mihomo/REJECT/ip/Reject_ip.yaml"
    path: "./ruleset/toookamak/Reject_ip.yaml"

  Reject_no_ip:
    type: "http"
    behavior: "classical"
    format: "yaml"
    interval: 86400
    url: "https://raw.githubusercontent.com/RealSeek/Clash_Rule_DIY/refs/heads/mihomo/REJECT/no_ip/Reject_no_ip.yaml"
    path: "./ruleset/toookamak/Reject_no_ip.yaml"

  Reject_domainset:
    type: "http"
    behavior: "classical"
    format: "yaml"
    interval: 86400
    url: "https://raw.githubusercontent.com/RealSeek/Clash_Rule_DIY/refs/heads/mihomo/REJECT/no_ip/Reject_domainset.yaml"
    path: "./ruleset/toookamak/Reject_domainset.yaml"

  Reject_no_ip_drop:
    type: "http"
    behavior: "classical"
    format: "yaml"
    interval: 86400
    url: "https://raw.githubusercontent.com/RealSeek/Clash_Rule_DIY/refs/heads/mihomo/REJECT/no_ip/Reject_no_ip_drop.yaml"
    path: "./ruleset/toookamak/Reject_no_ip_drop.yaml"

  Reject_no_ip_no_drop:
    type: "http"
    behavior: "classical"
    format: "yaml"
    interval: 86400
    url: "https://raw.githubusercontent.com/RealSeek/Clash_Rule_DIY/refs/heads/mihomo/REJECT/no_ip/Reject_no_ip_no_drop.yaml"
    path: "./ruleset/toookamak/Reject_no_ip_no_drop.yaml"

  # è·Ÿè¸ªå™¨æ‹¦æˆªè§„åˆ™é›†
  Tracking_ip:
    type: "http"
    behavior: "classical"
    format: "yaml"
    interval: 86400
    url: "https://raw.githubusercontent.com/RealSeek/Clash_Rule_DIY/refs/heads/mihomo/REJECT/ip/Tracking_ip.yaml"
    path: "./ruleset/toookamak/Tracking_ip.yaml"

  Tracking_domainset:
    type: "http"
    behavior: "classical"
    format: "yaml"
    interval: 86400
    url: "https://raw.githubusercontent.com/RealSeek/Clash_Rule_DIY/refs/heads/mihomo/REJECT/no_ip/Tracking_domainset.yaml"
    path: "./ruleset/toookamak/Tracking_domainset.yaml"

  Tracking_no_ip:
    type: "http"
    behavior: "classical"
    format: "yaml"
    interval: 86400
    url: "https://raw.githubusercontent.com/RealSeek/Clash_Rule_DIY/refs/heads/mihomo/REJECT/no_ip/Tracking_no_ip.yaml"
    path: "./ruleset/toookamak/Tracking_no_ip.yaml"

  # ç¨‹åºåŒ–å¹¿å‘Šæ‹¦æˆªè§„åˆ™é›†
  ProgrammaticAds_ip:
    type: "http"
    behavior: "classical"
    format: "yaml"
    interval: 86400
    url: "https://raw.githubusercontent.com/RealSeek/Clash_Rule_DIY/refs/heads/mihomo/REJECT/ip/ProgrammaticAds_ip.yaml"
    path: "./ruleset/toookamak/ProgrammaticAds_ip.yaml"

  ProgrammaticAds_domainset:
    type: "http"
    behavior: "classical"
    format: "yaml"
    interval: 86400
    url: "https://raw.githubusercontent.com/RealSeek/Clash_Rule_DIY/refs/heads/mihomo/REJECT/no_ip/ProgrammaticAds_domainset.yaml"
    path: "./ruleset/toookamak/ProgrammaticAds_domainset.yaml"

  ProgrammaticAds_no_ip:
    type: "http"
    behavior: "classical"
    format: "yaml"
    interval: 86400
    url: "https://raw.githubusercontent.com/RealSeek/Clash_Rule_DIY/refs/heads/mihomo/REJECT/no_ip/ProgrammaticAds_no_ip.yaml"
    path: "./ruleset/toookamak/ProgrammaticAds_no_ip.yaml"

  # ç›´è¿è§„åˆ™é›†
  China_ip:
    type: "http"
    behavior: "classical"
    format: "yaml"
    interval: 86400
    url: "https://raw.githubusercontent.com/RealSeek/Clash_Rule_DIY/refs/heads/mihomo/DIRECT/ip/China_ip.yaml"
    path: "./ruleset/toookamak/China_ip.yaml"

  Domestic_ip:
    type: "http"
    behavior: "classical"
    format: "yaml"
    interval: 86400
    url: "https://raw.githubusercontent.com/RealSeek/Clash_Rule_DIY/refs/heads/mihomo/DIRECT/ip/Domestic_ip.yaml"
    path: "./ruleset/toookamak/Domestic_ip.yaml"

  GoogleFCM_ip:
    type: "http"
    behavior: "classical"
    format: "yaml"
    interval: 86400
    url: "https://raw.githubusercontent.com/RealSeek/Clash_Rule_DIY/refs/heads/mihomo/DIRECT/ip/GoogleFCM_ip.yaml"
    path: "./ruleset/toookamak/GoogleFCM_ip.yaml"

  Lan_ip:
    type: "http"
    behavior: "classical"
    format: "yaml"
    interval: 86400
    url: "https://raw.githubusercontent.com/RealSeek/Clash_Rule_DIY/refs/heads/mihomo/DIRECT/ip/Lan_ip.yaml"
    path: "./ruleset/toookamak/Lan_ip.yaml"

  NetEaseMusic_ip:
    type: "http"
    behavior: "classical"
    format: "yaml"
    interval: 86400
    url: "https://raw.githubusercontent.com/RealSeek/Clash_Rule_DIY/refs/heads/mihomo/DIRECT/ip/NetEaseMusic_ip.yaml"
    path: "./ruleset/toookamak/NetEaseMusic_ip.yaml"

  SteamCN_ip:
    type: "http"
    behavior: "classical"
    format: "yaml"
    interval: 86400
    url: "https://raw.githubusercontent.com/RealSeek/Clash_Rule_DIY/refs/heads/mihomo/DIRECT/ip/SteamCN_ip.yaml"
    path: "./ruleset/toookamak/SteamCN_ip.yaml"

  AppleCDN_no_ip:
    type: "http"
    behavior: "classical"
    format: "yaml"
    interval: 86400
    url: "https://raw.githubusercontent.com/RealSeek/Clash_Rule_DIY/refs/heads/mihomo/DIRECT/no_ip/AppleCDN_no_ip.yaml"
    path: "./ruleset/toookamak/AppleCDN_no_ip.yaml"

  AppleCN_no_ip:
    type: "http"
    behavior: "classical"
    format: "yaml"
    interval: 86400
    url: "https://raw.githubusercontent.com/RealSeek/Clash_Rule_DIY/refs/heads/mihomo/DIRECT/no_ip/AppleCN_no_ip.yaml"
    path: "./ruleset/toookamak/AppleCN_no_ip.yaml"

  Direct_no_ip:
    type: "http"
    behavior: "classical"
    format: "yaml"
    interval: 86400
    url: "https://raw.githubusercontent.com/RealSeek/Clash_Rule_DIY/refs/heads/mihomo/DIRECT/no_ip/Direct_no_ip.yaml"
    path: "./ruleset/toookamak/Direct_no_ip.yaml"

  Domestic_no_ip:
    type: "http"
    behavior: "classical"
    format: "yaml"
    interval: 86400
    url: "https://raw.githubusercontent.com/RealSeek/Clash_Rule_DIY/refs/heads/mihomo/DIRECT/no_ip/Domestic_no_ip.yaml"
    path: "./ruleset/toookamak/Domestic_no_ip.yaml"

  GoogleFCM_no_ip:
    type: "http"
    behavior: "classical"
    format: "yaml"
    interval: 86400
    url: "https://raw.githubusercontent.com/RealSeek/Clash_Rule_DIY/refs/heads/mihomo/DIRECT/no_ip/GoogleFCM_no_ip.yaml"
    path: "./ruleset/toookamak/GoogleFCM_no_ip.yaml"

  Lan_no_ip:
    type: "http"
    behavior: "classical"
    format: "yaml"
    interval: 86400
    url: "https://raw.githubusercontent.com/RealSeek/Clash_Rule_DIY/refs/heads/mihomo/DIRECT/no_ip/Lan_no_ip.yaml"
    path: "./ruleset/toookamak/Lan_no_ip.yaml"

  MicrosoftCDN_no_ip:
    type: "http"
    behavior: "classical"
    format: "yaml"
    interval: 86400
    url: "https://raw.githubusercontent.com/RealSeek/Clash_Rule_DIY/refs/heads/mihomo/DIRECT/no_ip/MicrosoftCDN_no_ip.yaml"
    path: "./ruleset/toookamak/MicrosoftCDN_no_ip.yaml"

  NetEaseMusic_no_ip:
    type: "http"
    behavior: "classical"
    format: "yaml"
    interval: 86400
    url: "https://raw.githubusercontent.com/RealSeek/Clash_Rule_DIY/refs/heads/mihomo/DIRECT/no_ip/NetEaseMusic_no_ip.yaml"
    path: "./ruleset/toookamak/NetEaseMusic_no_ip.yaml"

  SteamCN_no_ip:
    type: "http"
    behavior: "classical"
    format: "yaml"
    interval: 86400
    url: "https://raw.githubusercontent.com/RealSeek/Clash_Rule_DIY/refs/heads/mihomo/DIRECT/no_ip/SteamCN_no_ip.yaml"
    path: "./ruleset/toookamak/SteamCN_no_ip.yaml"

  SteamRegion_no_ip:
    type: "http"
    behavior: "classical"
    format: "yaml"
    interval: 86400
    url: "https://raw.githubusercontent.com/RealSeek/Clash_Rule_DIY/refs/heads/mihomo/DIRECT/no_ip/SteamRegion_no_ip.yaml"
    path: "./ruleset/toookamak/SteamRegion_no_ip.yaml"

  # ä»£ç†è§„åˆ™é›†
  Stream_ip:
    type: "http"
    behavior: "classical"
    format: "yaml"
    interval: 86400
    url: "https://raw.githubusercontent.com/RealSeek/Clash_Rule_DIY/refs/heads/mihomo/PROXY/ip/Stream_ip.yaml"
    path: "./ruleset/toookamak/Stream_ip.yaml"

  Telegram_ip:
    type: "http"
    behavior: "classical"
    format: "yaml"
    interval: 86400
    url: "https://raw.githubusercontent.com/RealSeek/Clash_Rule_DIY/refs/heads/mihomo/PROXY/ip/Telegram_ip.yaml"
    path: "./ruleset/toookamak/Telegram_ip.yaml"

  AI_no_ip:
    type: "http"
    behavior: "classical"
    format: "yaml"
    interval: 86400
    url: "https://raw.githubusercontent.com/RealSeek/Clash_Rule_DIY/refs/heads/mihomo/PROXY/no_ip/AI_no_ip.yaml"
    path: "./ruleset/toookamak/AI_no_ip.yaml"

  Apple_no_ip:
    type: "http"
    behavior: "classical"
    format: "yaml"
    interval: 86400
    url: "https://raw.githubusercontent.com/RealSeek/Clash_Rule_DIY/refs/heads/mihomo/PROXY/no_ip/Apple_no_ip.yaml"
    path: "./ruleset/toookamak/Apple_no_ip.yaml"

  CDN_domainset:
    type: "http"
    behavior: "classical"
    format: "yaml"
    interval: 86400
    url: "https://raw.githubusercontent.com/RealSeek/Clash_Rule_DIY/refs/heads/mihomo/PROXY/no_ip/CDN_domainset.yaml"
    path: "./ruleset/toookamak/CDN_domainset.yaml"

  CDN_no_ip:
    type: "http"
    behavior: "classical"
    format: "yaml"
    interval: 86400
    url: "https://raw.githubusercontent.com/RealSeek/Clash_Rule_DIY/refs/heads/mihomo/PROXY/no_ip/CDN_no_ip.yaml"
    path: "./ruleset/toookamak/CDN_no_ip.yaml"

  CustomProxy_no_ip:
    type: "http"
    behavior: "classical"
    format: "yaml"
    interval: 86400
    url: "https://raw.githubusercontent.com/RealSeek/Clash_Rule_DIY/refs/heads/mihomo/PROXY/no_ip/CustomProxy_no_ip.yaml"
    path: "./ruleset/toookamak/CustomProxy_no_ip.yaml"

  Download_domainset:
    type: "http"
    behavior: "classical"
    format: "yaml"
    interval: 86400
    url: "https://raw.githubusercontent.com/RealSeek/Clash_Rule_DIY/refs/heads/mihomo/PROXY/no_ip/Download_domainset.yaml"
    path: "./ruleset/toookamak/Download_domainset.yaml"

  Download_no_ip:
    type: "http"
    behavior: "classical"
    format: "yaml"
    interval: 86400
    url: "https://raw.githubusercontent.com/RealSeek/Clash_Rule_DIY/refs/heads/mihomo/PROXY/no_ip/Download_no_ip.yaml"
    path: "./ruleset/toookamak/Download_no_ip.yaml"

  Global_no_ip:
    type: "http"
    behavior: "classical"
    format: "yaml"
    interval: 86400
    url: "https://raw.githubusercontent.com/RealSeek/Clash_Rule_DIY/refs/heads/mihomo/PROXY/no_ip/Global_no_ip.yaml"
    path: "./ruleset/toookamak/Global_no_ip.yaml"

  Microsoft_no_ip:
    type: "http"
    behavior: "classical"
    format: "yaml"
    interval: 86400
    url: "https://raw.githubusercontent.com/RealSeek/Clash_Rule_DIY/refs/heads/mihomo/PROXY/no_ip/Microsoft_no_ip.yaml"
    path: "./ruleset/toookamak/Microsoft_no_ip.yaml"

  Steam_no_ip:
    type: "http"
    behavior: "classical"
    format: "yaml"
    interval: 86400
    url: "https://raw.githubusercontent.com/RealSeek/Clash_Rule_DIY/refs/heads/mihomo/PROXY/no_ip/Steam_no_ip.yaml"
    path: "./ruleset/toookamak/Steam_no_ip.yaml"

  Telegram_no_ip:
    type: "http"
    behavior: "classical"
    format: "yaml"
    interval: 86400
    url: "https://raw.githubusercontent.com/RealSeek/Clash_Rule_DIY/refs/heads/mihomo/PROXY/no_ip/Telegram_no_ip.yaml"
    path: "./ruleset/toookamak/Telegram_no_ip.yaml"

  Update_no_ip:
    type: "http"
    behavior: "classical"
    format: "yaml"
    interval: 86400
    url: "https://raw.githubusercontent.com/RealSeek/Clash_Rule_DIY/refs/heads/mihomo/PROXY/no_ip/Update_no_ip.yaml"
    path: "./ruleset/toookamak/Update_no_ip.yaml"

  SteamRegion_ip:
    type: "http"
    behavior: "classical"
    format: "yaml"
    interval: 86400
    url: "https://raw.githubusercontent.com/RealSeek/Clash_Rule_DIY/refs/heads/mihomo/PROXY/ip/SteamRegion_ip.yaml"
    path: "./ruleset/toookamak/SteamRegion_ip.yaml"

  # æ–°å¢è§„åˆ™é›†
  Office_no_ip:
    type: "http"
    behavior: "classical"
    format: "yaml"
    interval: 86400
    url: "https://raw.githubusercontent.com/RealSeek/Clash_Rule_DIY/refs/heads/mihomo/PROXY/no_ip/Office_no_ip.yaml"
    path: "./ruleset/toookamak/Office_no_ip.yaml"

  # æ–°å¢ Figma è§„åˆ™é›†
  Figma_ip:
    type: "http"
    behavior: "ipcidr"
    format: "text"
    interval: 86400
    url: "https://raw.githubusercontent.com/Loyalsoldier/clash-rules/release/privateip.txt"
    path: "./ruleset/toookamak/Figma_ip.list"

  # è‡ªå®šä¹‰è§„åˆ™é›†
  CustomProxyRules:
    type: "http"
    behavior: "classical"
    format: "text"
    interval: 86400
    url: "https://raw.githubusercontent.com/toookamak/FL_ruleSet/refs/heads/main/OwnRules/OwnPROXYRules.list"
    path: "./ruleset/toookamak/OwnPROXYRules.yaml"

  CustomDirectRules:
    type: "http"
    behavior: "classical"
    format: "text"
    interval: 86400
    url: "https://raw.githubusercontent.com/toookamak/FL_ruleSet/refs/heads/main/OwnRules/OwnDIRECTRules.list"
    path: "./ruleset/toookamak/OwnDIRECTRules.yaml"

  # åº”ç”¨è§„åˆ™é›†
  applications:
    type: "http"
    behavior: "classical"
    format: "text"
    interval: 86400
    url: "https://raw.githubusercontent.com/Loyalsoldier/clash-rules/release/applications.txt"
    path: "./ruleset/toookamak/applications.yaml"

  # Epicä¸‹è½½è§„åˆ™é›†
  epicDownload:
    type: "http"
    behavior: "classical"
    format: "text"
    interval: 86400
    url: "https://raw.githubusercontent.com/Loyalsoldier/clash-rules/release/epic.txt"
    path: "./ruleset/toookamak/epicDownload.yaml"

  # è™šå¹»å¼•æ“è§„åˆ™é›†
  UnrealRules:
    type: "http"
    behavior: "classical"
    format: "text"
    interval: 86400
    url: "https://raw.githubusercontent.com/Loyalsoldier/clash-rules/release/unreal.txt"
    path: "./ruleset/toookamak/UnrealRules.yaml"

  # AIè§„åˆ™é›†
  ai:
    type: "http"
    behavior: "classical"
    format: "text"
    interval: 86400
    url: "https://raw.githubusercontent.com/Loyalsoldier/clash-rules/release/ai.txt"
    path: "./ruleset/toookamak/ai.yaml"

# ================= è§„åˆ™é›† =================
rules:
  # å¹¿å‘Šæ‹¦æˆªè§„åˆ™
  - "RULE-SET,Reject_no_ip,å¹¿å‘Šæ‹¦æˆª"
  - "RULE-SET,Reject_domainset,å¹¿å‘Šæ‹¦æˆª"
  - "RULE-SET,Reject_no_ip_drop,å¹¿å‘Šæ‹¦æˆª"
  - "RULE-SET,Reject_no_ip_no_drop,å¹¿å‘Šæ‹¦æˆª"
  - "RULE-SET,Reject_ip,å¹¿å‘Šæ‹¦æˆª"

  # è·Ÿè¸ªå™¨æ‹¦æˆªè§„åˆ™
  - "RULE-SET,Tracking_ip,æ‹¦æˆªè·Ÿè¸ª"
  - "RULE-SET,Tracking_domainset,æ‹¦æˆªè·Ÿè¸ª"
  - "RULE-SET,Tracking_no_ip,æ‹¦æˆªè·Ÿè¸ª"

  # ç¨‹åºåŒ–å¹¿å‘Šæ‹¦æˆªè§„åˆ™
  - "RULE-SET,ProgrammaticAds_ip,å¹¿å‘Šæ‹¦æˆª"
  - "RULE-SET,ProgrammaticAds_domainset,å¹¿å‘Šæ‹¦æˆª"
  - "RULE-SET,ProgrammaticAds_no_ip,å¹¿å‘Šæ‹¦æˆª"

  # åº”ç”¨è§„åˆ™é›†
  - "RULE-SET,applications,å¤§æµé‡é€šé“"

  # è‡ªå®šä¹‰è§„åˆ™é›†
  - "RULE-SET,CustomProxyRules,è‡ªå®šä¹‰ä»£ç†è§„åˆ™"
  - "RULE-SET,CustomDirectRules,è‡ªå®šä¹‰ç›´è¿è§„åˆ™"

  # æœåŠ¡ä¸“ç”¨è§„åˆ™
  - "GEOSITE,onedrive,ç½‘ç»œåŠå…¬"
  - "GEOSITE,github,ç½‘ç»œåŠå…¬"
  - "DOMAIN-SUFFIX,grazie.ai,AIæœåŠ¡"
  - "DOMAIN-SUFFIX,grazie.aws.intellij.net,AIæœåŠ¡"
  - "RULE-SET,ai,AIæœåŠ¡"
  - "GEOSITE,youtube,è§†é¢‘æœåŠ¡"
  - "GEOIP,telegram,å³æ—¶é€šè®¯"
  - "GEOSITE,google,è°·æ­ŒæœåŠ¡"
  - "GEOSITE,microsoft@cn,å›½å†…æµé‡"
  - "GEOSITE,microsoft,å¾®è½¯æœåŠ¡"
  - "RULE-SET,epicDownload,å¤§æµé‡é€šé“"
  - "RULE-SET,UnrealRules,è™šå¹»å¼•æ“"

  # åŸºç¡€è·¯ç”±è§„åˆ™
  - "GEOSITE,private,DIRECT"
  - "GEOIP,private,DIRECT,no-resolve"
  - "GEOSITE,cn,DIRECT"
  - "GEOIP,cn,DIRECT,no-resolve"

  # æœ€ç»ˆåŒ¹é…è§„åˆ™
  - "GEOIP,CN,å›½å†…æµé‡"
  - "MATCH,å›½é™…æµé‡"

# ================= é«˜çº§åŠŸèƒ½ =================
profile:
  store-selected: true
  store-fake-ip: true

sniffer:
  enable: true
  force-dns-mapping: true
  parse-pure-ip: true
  override-destination: false
  sniff:
    HTTP:
      ports: ["80", "443"]
      override-destination: false
    TLS:
      ports: ["443"]
    QUIC:
      ports: [443, 8443]
  skip-domain: ["+.push.apple.com"]
  skip-dst-address:
    - "91.105.192.0/23"
    - "91.108.4.0/22"
    - "91.108.8.0/21"
    - "91.108.16.0/21"
    - "91.108.56.0/22"
    - "95.161.64.0/20"
    - "149.154.160.0/20"
    - "185.76.151.0/24"
    - "2001:67c:4e8::/48"
    - "2001:b28:f23c::/47"
    - "2001:b28:f23f::/48"
    - "2a0a:f280:203::/48"

geox-url:
  geoip: "https://github.com/MetaCubeX/meta-rules-dat/releases/download/latest/geoip.dat"
  geosite: "https://github.com/MetaCubeX/meta-rules-dat/releases/download/latest/geosite.dat"
  mmdb: "https://github.com/MetaCubeX/meta-rules-dat/releases/download/latest/country-lite.mmdb"
  asn: "https://github.com/MetaCubeX/meta-rules-dat/releases/download/latest/GeoLite2-ASN.mmdb"

tun:
  enable: true
  stack: mixed
  device: "Mihomo"
  dns-hijack:
    - "any:53"
    - "tcp://any:53"
  auto-route: true
  auto-redirect: true
  auto-detect-interface: true
  strict-route: true
  route-exclude-address:
    - "192.168.0.0/16"
    - "10.0.0.0/8"
    - "172.16.0.0/12"
  mtu: 1500
