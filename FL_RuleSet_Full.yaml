# FL_RuleSet_Full å®Œæ•´é…ç½®
# è½¬æ¢è‡ª FL_RuleSet_Full.js v3.1.4
# ç‰¹æ€§ï¼šå®¶å®½ä¼˜å…ˆ/ä½å€ç‡èŠ‚ç‚¹/æ™ºèƒ½åˆ†æµ/éšç§ä¿æŠ¤
# æ›´æ–°æ—¶é—´: 2024-06-15

port: 7890
socks-port: 7891
allow-lan: true
bind-address: '*'
mode: rule
log-level: info
external-controller: 127.0.0.1:9090

# ================= DNS é…ç½® =================
dns:
  enable: true
  listen: :1053
  ipv6: true
  prefer-h3: true
  use-hosts: true
  use-system-hosts: true
  respect-rules: true
  enhanced-mode: fake-ip
  fake-ip-range: 198.18.0.1/16
  fake-ip-filter:
    - '*'
    - '+.lan'
    - '+.local'
    - '+.market.xiaomi.com'
  nameserver:
    - 'https://120.53.53.53/dns-query'
    - 'https://223.5.5.5/dns-query'
  proxy-server-nameserver:
    - 'https://1.1.1.1/dns-query'
    - 'https://223.5.5.5/dns-query'
  ssl-verification: true
  cache: true
  cache-size: 4096
  cache-ttl-min: 600
  cache-ttl-max: 3600
  nameserver-policy:
    'geosite:private': 'system'
    'geosite:cn,steam@cn,category-games@cn,microsoft@cn,apple@cn': 
      - '119.29.29.29'
      - '223.5.5.5'

# ================= ç­–ç•¥ç»„é…ç½® =================
proxy-groups:
  # ==== æ ¸å¿ƒç­–ç•¥ç»„ ====
  - name: ğŸ›¡ï¸ ä»£ç†æ¨¡å¼
    type: select
    proxies:
      - ğŸ”„ æ‰‹åŠ¨é€‰æ‹©
      - âš¡ å»¶è¿Ÿä¼˜é€‰
      - ğŸš¨ æ•…éšœè½¬ç§»
      - ğŸ  åŸç”ŸIP/å®¶å®½
      - ğŸ“‰ ä½å€ç‡
      - ğŸ‡­ğŸ‡° HKé¦™æ¸¯
      - ğŸ‡ºğŸ‡¸ USç¾å›½
      - ğŸ‡¯ğŸ‡µ JPæ—¥æœ¬
      - ğŸ‡¸ğŸ‡¬ SGæ–°åŠ å¡
      - ğŸ‡¹ğŸ‡¼ TWå°æ¹¾çœ
      - ğŸŒ å…¶ä»–èŠ‚ç‚¹
      - ğŸŸ¢ ç›´è¿
      - âŒ æ‹’ç»

  - name: ğŸ”„ æ‰‹åŠ¨é€‰æ‹©
    type: select
    proxies: []  # åŠ¨æ€å¡«å……æ‰€æœ‰èŠ‚ç‚¹

  - name: âš¡ å»¶è¿Ÿä¼˜é€‰
    type: url-test
    tolerance: 50
    interval: 300
    url: "http://cp.cloudflare.com/generate_204"
    proxies:
      - ğŸ  åŸç”ŸIP/å®¶å®½
      - ğŸ“‰ ä½å€ç‡
      - ğŸ‡­ğŸ‡° HKé¦™æ¸¯
      - ğŸ‡ºğŸ‡¸ USç¾å›½
      - ğŸ‡¯ğŸ‡µ JPæ—¥æœ¬
      - ğŸ‡¸ğŸ‡¬ SGæ–°åŠ å¡
      - ğŸ‡¹ğŸ‡¼ TWå°æ¹¾çœ
      - ğŸŒ å…¶ä»–èŠ‚ç‚¹

  - name: ğŸš¨ æ•…éšœè½¬ç§»
    type: fallback
    interval: 300
    url: "http://cp.cloudflare.com/generate_204"
    proxies:
      - âš¡ å»¶è¿Ÿä¼˜é€‰
      - ğŸ  åŸç”ŸIP/å®¶å®½
      - ğŸ“‰ ä½å€ç‡
      - ğŸ‡­ğŸ‡° HKé¦™æ¸¯
      - ğŸ‡ºğŸ‡¸ USç¾å›½
      - ğŸ‡¯ğŸ‡µ JPæ—¥æœ¬
      - ğŸ‡¸ğŸ‡¬ SGæ–°åŠ å¡
      - ğŸ‡¹ğŸ‡¼ TWå°æ¹¾çœ

  # ==== åœ°åŒºèŠ‚ç‚¹ç»„ ====
  - name: ğŸ  åŸç”ŸIP/å®¶å®½
    type: url-test
    filter: "åŸç”Ÿ|å®¶å®½|ä½å®…|home|residential"
    tolerance: 50
    interval: 300
    url: "http://cp.cloudflare.com/generate_204"

  - name: ğŸ“‰ ä½å€ç‡
    type: url-test
    filter: "ä½å€ç‡|0\\.2|0.5|ratio|å€ç‡ä½"
    tolerance: 50
    interval: 300
    url: "http://cp.cloudflare.com/generate_204"

  - name: ğŸ‡­ğŸ‡° HKé¦™æ¸¯
    type: url-test
    filter: "æ¸¯|hk|hongkong|hong kong"
    tolerance: 50
    interval: 300
    url: "http://cp.cloudflare.com/generate_204"

  - name: ğŸ‡ºğŸ‡¸ USç¾å›½
    type: url-test
    filter: "ç¾|us|united state|america"
    tolerance: 50
    interval: 300
    url: "http://cp.cloudflare.com/generate_204"

  - name: ğŸ‡¯ğŸ‡µ JPæ—¥æœ¬
    type: url-test
    filter: "æ—¥æœ¬|jp|japan"
    tolerance: 50
    interval: 300
    url: "http://cp.cloudflare.com/generate_204"

  - name: ğŸ‡¸ğŸ‡¬ SGæ–°åŠ å¡
    type: url-test
    filter: "æ–°åŠ å¡|sg|singapore"
    tolerance: 50
    interval: 300
    url: "http://cp.cloudflare.com/generate_204"

  - name: ğŸ‡¹ğŸ‡¼ TWå°æ¹¾çœ
    type: url-test
    filter: "å°æ¹¾|tw|taiwan|tai wan"
    tolerance: 50
    interval: 300
    url: "http://cp.cloudflare.com/generate_204"

  - name: ğŸŒ å…¶ä»–èŠ‚ç‚¹
    type: select
    proxies: []  # åŠ¨æ€å¡«å……æœªåˆ†ç»„èŠ‚ç‚¹

  # ==== åº”ç”¨ç­–ç•¥ç»„ ====
  - name: ğŸ’¬ NotionåŠå…¬
    type: select
    proxies:
      - ğŸ›¡ï¸ ä»£ç†æ¨¡å¼
      - ğŸ”„ æ‰‹åŠ¨é€‰æ‹©
      - âš¡ å»¶è¿Ÿä¼˜é€‰
      - ğŸš¨ æ•…éšœè½¬ç§»
      - ğŸŸ¢ ç›´è¿
      - âŒ æ‹’ç»

  - name: ğŸ¤– å›½å¤–AI
    type: url-test
    url: "https://chat.openai.com/cdn-cgi/trace"
    interval: 300
    tolerance: 50
    proxies:
      - ğŸ›¡ï¸ ä»£ç†æ¨¡å¼
      - ğŸ”„ æ‰‹åŠ¨é€‰æ‹©
      - âš¡ å»¶è¿Ÿä¼˜é€‰
      - ğŸš¨ æ•…éšœè½¬ç§»
      - ğŸŸ¢ ç›´è¿
      - âŒ æ‹’ç»

  - name: ğŸ“¹ YouTube
    type: url-test
    url: "https://www.youtube.com/s/desktop/494dd881/img/favicon.ico"
    interval: 300
    tolerance: 50
    proxies:
      - ğŸ›¡ï¸ ä»£ç†æ¨¡å¼
      - ğŸ”„ æ‰‹åŠ¨é€‰æ‹©
      - âš¡ å»¶è¿Ÿä¼˜é€‰
      - ğŸš¨ æ•…éšœè½¬ç§»
      - ğŸŸ¢ ç›´è¿
      - âŒ æ‹’ç»

  - name: âœˆï¸ Telegram
    type: url-test
    url: "http://www.telegram.org/img/website_icon.svg"
    interval: 300
    tolerance: 50
    proxies:
      - ğŸ›¡ï¸ ä»£ç†æ¨¡å¼
      - ğŸ”„ æ‰‹åŠ¨é€‰æ‹©
      - âš¡ å»¶è¿Ÿä¼˜é€‰
      - ğŸš¨ æ•…éšœè½¬ç§»
      - ğŸŸ¢ ç›´è¿
      - âŒ æ‹’ç»

  - name: ğŸ è‹¹æœæœåŠ¡
    type: url-test
    url: "http://www.apple.com/library/test/success.html"
    interval: 300
    tolerance: 50
    proxies:
      - ğŸ›¡ï¸ ä»£ç†æ¨¡å¼
      - ğŸ”„ æ‰‹åŠ¨é€‰æ‹©
      - âš¡ å»¶è¿Ÿä¼˜é€‰
      - ğŸš¨ æ•…éšœè½¬ç§»
      - ğŸŸ¢ ç›´è¿
      - âŒ æ‹’ç»

  - name: ğŸ” è°·æ­ŒæœåŠ¡
    type: url-test
    url: "http://www.google.com/generate_204"
    interval: 300
    tolerance: 50
    proxies:
      - ğŸ›¡ï¸ ä»£ç†æ¨¡å¼
      - ğŸ”„ æ‰‹åŠ¨é€‰æ‹©
      - âš¡ å»¶è¿Ÿä¼˜é€‰
      - ğŸš¨ æ•…éšœè½¬ç§»
      - ğŸŸ¢ ç›´è¿
      - âŒ æ‹’ç»

  - name: â“‚ï¸ å¾®è½¯æœåŠ¡
    type: url-test
    url: "http://www.msftconnecttest.com/connecttest.txt"
    interval: 300
    tolerance: 50
    proxies:
      - ğŸ›¡ï¸ ä»£ç†æ¨¡å¼
      - ğŸ”„ æ‰‹åŠ¨é€‰æ‹©
      - âš¡ å»¶è¿Ÿä¼˜é€‰
      - ğŸš¨ æ•…éšœè½¬ç§»
      - ğŸŸ¢ ç›´è¿
      - âŒ æ‹’ç»

  - name: ğŸ™ GitHubæœåŠ¡
    type: url-test
    url: "https://github.com/robots.txt"
    interval: 300
    tolerance: 50
    proxies:
      - ğŸ›¡ï¸ ä»£ç†æ¨¡å¼
      - ğŸ”„ æ‰‹åŠ¨é€‰æ‹©
      - âš¡ å»¶è¿Ÿä¼˜é€‰
      - ğŸš¨ æ•…éšœè½¬ç§»
      - ğŸŸ¢ ç›´è¿
      - âŒ æ‹’ç»

  - name: ğŸ® è™šå¹»å¼•æ“
    type: select
    proxies:
      - ğŸ›¡ï¸ ä»£ç†æ¨¡å¼
      - ğŸ”„ æ‰‹åŠ¨é€‰æ‹©
      - âš¡ å»¶è¿Ÿä¼˜é€‰
      - ğŸš¨ æ•…éšœè½¬ç§»
      - ğŸŸ¢ ç›´è¿
      - âŒ æ‹’ç»

  # ==== åŸºç¡€ç­–ç•¥ç»„ ====
  - name: ğŸ’¾ ä¸‹è½½è½¯ä»¶
    type: select
    proxies:
      - ğŸ›¡ï¸ ä»£ç†æ¨¡å¼
      - ğŸ”„ æ‰‹åŠ¨é€‰æ‹©
      - âš¡ å»¶è¿Ÿä¼˜é€‰
      - ğŸš¨ æ•…éšœè½¬ç§»
      - ğŸŸ¢ ç›´è¿
      - âŒ æ‹’ç»

  - name: ğŸŒ å…¶ä»–å¤–ç½‘
    type: select
    proxies:
      - ğŸ›¡ï¸ ä»£ç†æ¨¡å¼
      - ğŸ”„ æ‰‹åŠ¨é€‰æ‹©
      - âš¡ å»¶è¿Ÿä¼˜é€‰
      - ğŸš¨ æ•…éšœè½¬ç§»
      - ğŸŸ¢ ç›´è¿
      - âŒ æ‹’ç»

  - name: ğŸ‡¨ğŸ‡³ å›½å†…ç½‘ç«™
    type: url-test
    url: "http://wifi.vivo.com.cn/generate_204"
    interval: 300
    tolerance: 50
    proxies:
      - ğŸ›¡ï¸ ä»£ç†æ¨¡å¼
      - ğŸ”„ æ‰‹åŠ¨é€‰æ‹©
      - âš¡ å»¶è¿Ÿä¼˜é€‰
      - ğŸš¨ æ•…éšœè½¬ç§»
      - ğŸŸ¢ ç›´è¿
      - âŒ æ‹’ç»

  # ==== ç³»ç»Ÿç­–ç•¥ç»„ ====
  - name: ğŸ›‘ å¹¿å‘Šè¿‡æ»¤
    type: select
    proxies:
      - âŒ æ‹’ç»
      - ğŸŸ¢ ç›´è¿
      - ğŸ›¡ï¸ ä»£ç†æ¨¡å¼

  - name: ğŸ”’ è·Ÿè¸ªåˆ†æ
    type: select
    proxies:
      - âŒ æ‹’ç»
      - ğŸŸ¢ ç›´è¿
      - ğŸ›¡ï¸ ä»£ç†æ¨¡å¼

  - name: ğŸŸ¢ ç›´è¿
    type: select
    proxies:
      - DIRECT

  - name: âŒ æ‹’ç»
    type: select
    proxies:
      - REJECT

# ================= è§„åˆ™æä¾›è€… =================
rule-providers:
  applications:
    type: http
    behavior: classical
    format: text
    interval: 86400
    path: ./ruleset/applications.list
    url: "https://fastly.jsdelivr.net/gh/DustinWin/ruleset_geodata@clash-ruleset/applications.list"

  adblockmihomo:
    type: http
    behavior: domain
    format: mrs
    interval: 86400
    path: ./ruleset/adblockmihomo.mrs
    url: "https://github.com/217heidai/adblockfilters/raw/main/rules/adblockmihomo.mrs"

  ai:
    type: http
    behavior: classical
    format: text
    interval: 86400
    path: ./ruleset/ai.list
    url: "https://github.com/dahaha-365/YaNet/raw/dist/rulesets/mihomo/ai.list"

  epicDownload:
    type: http
    behavior: classical
    format: text
    interval: 86400
    path: ./ruleset/Epic.list
    url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Epic/Epic.list"

  notion:
    type: http
    behavior: classical
    format: text
    interval: 86400
    path: ./ruleset/notion.list
    url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Notion/Notion.list"

  figma_in_notion:
    type: http
    behavior: classical
    format: text
    interval: 86400
    path: ./ruleset/figma.list
    url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Figma/Figma.list"

  own_direct:
    type: http
    behavior: classical
    format: text
    interval: 86400
    path: ./ruleset/own_direct.list
    url: "https://raw.githubusercontent.com/toookamak/FL_ruleSet/main/OwnRules/OwnDIRECTRules.list"

  own_proxy:
    type: http
    behavior: classical
    format: text
    interval: 86400
    path: ./ruleset/own_proxy.list
    url: "https://raw.githubusercontent.com/toookamak/FL_ruleSet/main/OwnRules/OwnPROXYRules.list"

# ================= è§„åˆ™é›† =================
rules:
  # ===== å‰ç½®è§„åˆ™ =====
  - RULE-SET,applications,ğŸ’¾ ä¸‹è½½è½¯ä»¶
  - PROCESS-NAME,SunloginClient,DIRECT
  - PROCESS-NAME,SunloginClient.exe,DIRECT
  - PROCESS-NAME,AnyDesk,DIRECT
  - PROCESS-NAME,AnyDesk.exe,DIRECT
  
  # ===== è‡ªå®šä¹‰è§„åˆ™ =====
  - RULE-SET,own_direct,ğŸŸ¢ ç›´è¿
  - RULE-SET,own_proxy,ğŸ›¡ï¸ ä»£ç†æ¨¡å¼
  
  # ===== åŠŸèƒ½è§„åˆ™ =====
  - RULE-SET,notion,ğŸ’¬ NotionåŠå…¬
  - RULE-SET,figma_in_notion,ğŸ’¬ NotionåŠå…¬
  - DOMAIN-SUFFIX,grazie.ai,ğŸ¤– å›½å¤–AI
  - DOMAIN-SUFFIX,grazie.aws.intellij.net,ğŸ¤– å›½å¤–AI
  - RULE-SET,ai,ğŸ¤– å›½å¤–AI
  - GEOSITE,youtube,ğŸ“¹ YouTube
  - GEOIP,telegram,âœˆï¸ Telegram
  - GEOSITE,tracker,ğŸ”’ è·Ÿè¸ªåˆ†æ
  - GEOSITE,category-ads-all,ğŸ›‘ å¹¿å‘Šè¿‡æ»¤
  - RULE-SET,adblockmihomo,ğŸ›‘ å¹¿å‘Šè¿‡æ»¤
  - GEOSITE,apple-cn,ğŸ è‹¹æœæœåŠ¡
  - GEOSITE,google,ğŸ” è°·æ­ŒæœåŠ¡
  - GEOSITE,microsoft@cn,ğŸ‡¨ğŸ‡³ å›½å†…ç½‘ç«™
  - GEOSITE,microsoft,â“‚ï¸ å¾®è½¯æœåŠ¡
  - GEOSITE,github,ğŸ™ GitHubæœåŠ¡
  - RULE-SET,epicDownload,ğŸ® è™šå¹»å¼•æ“
  
  # ===== åç½®è§„åˆ™ =====
  - GEOSITE,private,ğŸŸ¢ ç›´è¿
  - GEOIP,private,ğŸŸ¢ ç›´è¿,no-resolve
  - GEOSITE,cn,ğŸ‡¨ğŸ‡³ å›½å†…ç½‘ç«™
  - GEOIP,cn,ğŸ‡¨ğŸ‡³ å›½å†…ç½‘ç«™,no-resolve
  - MATCH,ğŸŒ å…¶ä»–å¤–ç½‘

# ================= é«˜çº§åŠŸèƒ½ =================
profile:
  store-selected: true
  store-fake-ip: true

sniffer:
  enable: true
  force-dns-mapping: true
  parse-pure-ip: false
  override-destination: true
  sniff:
    TLS:
      ports: [443, 8443]
    HTTP:
      ports: [80, "8080-8880"]
    QUIC:
      ports: [443, 8443]
  skip-src-address:
    - 127.0.0.0/8
    - 192.168.0.0/16
    - 10.0.0.0/8
    - 172.16.0.0/12
  force-domain:
    - "+.google.com"
    - "+.googleapis.com"
    - "+.googleusercontent.com"
    - "+.youtube.com"
    - "+.facebook.com"
    - "+.messenger.com"
    - "+.fbcdn.net"
    - "fbcdn-a.akamaihd.net"
  skip-domain:
    - "Mijia Cloud"
    - "+.oray.com"

ntp:
  enable: true
  write-to-system: false
  server: "cn.ntp.org.cn"

geox-url:
  geoip: "https://github.com/MetaCubeX/meta-rules-dat/releases/download/latest/geoip-lite.dat"
  geosite: "https://github.com/MetaCubeX/meta-rules-dat/releases/download/latest/geosite.dat"
  mmdb: "https://github.com/MetaCubeX/meta-rules-dat/releases/download/latest/country-lite.mmdb"
  asn: "https://github.com/MetaCubeX/meta-rules-dat/releases/download/latest/GeoLite2-ASN.mmdb"

tun:
  enable: true
  stack: gvisor
  dns-hijack:
    - 198.18.0.2:53
  auto-route: true
  auto-detect-interface: true
  mtu: 9000
